MIR_COMMON_5 {
 global:
  extern "C++" {
# The following symbols come from running a script over the generated docs. Vis:
# ../tools/process_doxygen_xml.py doc/xml/*.xml | grep "^mircommon public" | sed "s/mircommon public: /    /" | sort  
    mir::detail::RefCountedLibrary::operator*;
    mir::detail::RefCountedLibrary::?RefCountedLibrary*;
    mir::detail::RefCountedLibrary::RefCountedLibrary*;
    mir::dispatch::ActionQueue::ActionQueue*;
    mir::dispatch::ActionQueue::?ActionQueue*;
    mir::dispatch::ActionQueue::watch_fd*;
    mir::dispatch::ActionQueue::dispatch*;
    mir::dispatch::ActionQueue::relevant_events*;
    mir::dispatch::ActionQueue::enqueue*;
    mir::dispatch::Dispatchable::?Dispatchable*;
    mir::dispatch::Dispatchable::Dispatchable*;
    mir::dispatch::Dispatchable::operator*;
    mir::dispatch::MultiplexingDispatchable::add_watch*;
    mir::dispatch::MultiplexingDispatchable::dispatch*;
    mir::dispatch::MultiplexingDispatchable::?MultiplexingDispatchable*;
    mir::dispatch::MultiplexingDispatchable::MultiplexingDispatchable*;
    mir::dispatch::MultiplexingDispatchable::operator*;
    mir::dispatch::MultiplexingDispatchable::relevant_events*;
    mir::dispatch::MultiplexingDispatchable::remove_watch*;
    mir::dispatch::MultiplexingDispatchable::watch_fd*;
    mir::dispatch::ThreadedDispatcher::ThreadedDispatcher*;
    mir::dispatch::ThreadedDispatcher::?ThreadedDispatcher*;
    mir::dispatch::ThreadedDispatcher::add_thread*;
    mir::dispatch::ThreadedDispatcher::remove_thread*;
    mir::fatal_error*;
    mir::fatal_error_abort*;
    mir::fatal_error_except*;
    mir::Fd::Fd*;
    mir::Fd::invalid*;
    mir::Fd::operator*;
    mir::geometry::Displacement::Displacement*;
    mir::geometry::Displacement::operator*;
    mir::geometry::Length::Length*;
    mir::geometry::Length::operator*;
    mir::geometry::operator*;
    mir::geometry::Point::operator*;
    mir::geometry::Point::Point*;
    mir::geometry::Rectangle::bottom_left*;
    mir::geometry::Rectangle::bottom_right*;
    mir::geometry::Rectangle::contains*;
    mir::geometry::Rectangle::intersection_with*;
    mir::geometry::Rectangle::overlaps*;
    mir::geometry::Rectangle::Rectangle*;
    mir::geometry::Rectangles::add*;
    mir::geometry::Rectangles::begin*;
    mir::geometry::Rectangles::bounding_rectangle*;
    mir::geometry::Rectangles::clear*;
    mir::geometry::Rectangles::confine*;
    mir::geometry::Rectangles::end*;
    mir::geometry::Rectangles::operator*;
    mir::geometry::Rectangles::Rectangles*;
    mir::geometry::Rectangles::remove*;
    mir::geometry::Rectangles::size*;
    mir::geometry::Rectangle::top_right*;
    mir::geometry::Size::operator*;
    mir::geometry::Size::Size*;
    mir::log*;
    mir::logging::log*;
    mir::logging::Logger::?Logger*;
    mir::logging::Logger::Logger*;
    mir::logging::Logger::operator*;
    mir::logging::set_logger*;
    mir::SharedLibrary::load_symbol*;
    mir::SharedLibrary::?SharedLibrary*;
    mir::SharedLibrary::SharedLibrary*;
    non-virtual?thunk?to?mir::dispatch::ActionQueue::?ActionQueue*;
    non-virtual?thunk?to?mir::dispatch::Dispatchable::?Dispatchable*;
    non-virtual?thunk?to?mir::dispatch::MultiplexingDispatchable::dispatch*;
    non-virtual?thunk?to?mir::dispatch::MultiplexingDispatchable::?MultiplexingDispatchable*;
    non-virtual?thunk?to?mir::dispatch::MultiplexingDispatchable::relevant_events*;
    non-virtual?thunk?to?mir::dispatch::MultiplexingDispatchable::watch_fd*;
    non-virtual?thunk?to?mir::logging::Logger::?Logger*;
    typeinfo?for?MirBufferPackage;
    typeinfo?for?mir::detail::RefCountedLibrary;
    typeinfo?for?mir::dispatch::ActionQueue;
    typeinfo?for?mir::dispatch::Dispatchable;
    typeinfo?for?mir::dispatch::MultiplexingDispatchable;
    typeinfo?for?mir::dispatch::ThreadedDispatcher;
    typeinfo?for?mir::Fd;
    typeinfo?for?mir::geometry::Displacement;
    typeinfo?for?mir::geometry::Length;
    typeinfo?for?mir::geometry::Point;
    typeinfo?for?mir::geometry::Rectangle;
    typeinfo?for?mir::geometry::Rectangles;
    typeinfo?for?mir::geometry::Size;
    typeinfo?for?mir::IntOwnedFd;
    typeinfo?for?mir::logging::Logger;
    vtable?for?MirBufferPackage;
    vtable?for?mir::detail::RefCountedLibrary;
    vtable?for?mir::dispatch::ActionQueue;
    vtable?for?mir::dispatch::Dispatchable;
    vtable?for?mir::dispatch::MultiplexingDispatchable;
    vtable?for?mir::dispatch::ThreadedDispatcher;
    vtable?for?mir::Fd;
    vtable?for?mir::geometry::Displacement;
    vtable?for?mir::geometry::Length;
    vtable?for?mir::geometry::Point;
    vtable?for?mir::geometry::Rectangle;
    vtable?for?mir::geometry::Rectangles;
    vtable?for?mir::geometry::Size;
    vtable?for?mir::IntOwnedFd;
    vtable?for?mir::logging::Logger;
    
    # These symbols are supposed to be "private" (they're under src/include)
    # but they are used by libmirplatform, libmirclient or libmirserver
    mir::default_server_socket;
    mir::libraries_for_path*;
    mir::logging::input_timestamp*;
    mir::logging::log*;
    mir::logging::SharedLibraryProberReport::SharedLibraryProberReport*;
    mir::RecursiveReadLock::?RecursiveReadLock*;
    mir::RecursiveReadLock::RecursiveReadLock*;
    mir::RecursiveReadWriteMutex::read_lock*;
    mir::RecursiveReadWriteMutex::read_unlock*;
    mir::RecursiveReadWriteMutex::write_lock*;
    mir::RecursiveReadWriteMutex::write_unlock*;
    mir::report::lttng::TracepointProvider::?TracepointProvider*;
    mir::report::lttng::TracepointProvider::TracepointProvider*;
    mir::set_thread_name*;
    vtable?for?mir::logging::DumbConsoleLogger;
    vtable?for?mir::time::SteadyClock;
    vtable?for?mir::time::Clock;

    mir::send_fds*;

    mir::fd_reception_error::fd_reception_error*;
    mir::receive_data*;
    mir::socket_error::socket_error*;
    mir::socket_error_is_transient*;
    mir::socket_disconnected_error*;
    typeinfo?for?mir::fd_reception_error;
    typeinfo?for?mir::socket_error;
    typeinfo?for?mir::socket_disconnected_error;

    mir::SignalBlocker::SignalBlocker*;
    mir::SignalBlocker::?SignalBlocker*;
  };
};

MIR_COMMON_5.1 {  # New functions in Mir 0.16
 global:
    __android_log_assert;
    __android_log_print;
    systemTime;
    toMillisecondTimeoutDelay;
    extern "C++" {
      android::InputChannel::InputChannel*;
      android::InputChannel::openInputFdPair*;
      android::InputConsumer::consume*;
      android::InputConsumer::hasDeferredEvent*;
      android::InputConsumer::hasPendingBatch*;
      android::InputConsumer::?InputConsumer*;
      android::InputConsumer::InputConsumer*;
      android::InputConsumer::sendFinishedSignal*;
      android::InputPublisher::?InputPublisher*;
      android::InputPublisher::InputPublisher*;
      android::InputPublisher::publishKeyEvent*;
      android::InputPublisher::publishMotionEvent*;
      android::InputPublisher::receiveFinishedSignal*;
      android::IntSet::contains*;
      android::IntSet::indexOf*;
      android::IntSet::?IntSet*;
      android::IntSet::IntSet*;
      android::IntSet::operator*;
      android::IntSet::remove*;
      android::KeyEvent::initialize*;
      android::MotionEvent::getAxisValue*;
      android::MotionEvent::getAxisValue*;
      android::MotionEvent::getHistoricalAxisValue*;
      android::MotionEvent::getRawAxisValue*;
      android::MotionEvent::getRawAxisValue*;
      android::PointerCoords::copyFrom*;
      android::PointerCoords::getAxisValue*;
      android::PointerCoords::operator*;
      android::PointerCoords::setAxisValue*;
      android::PointerProperties::copyFrom*;
      android::PointerProperties::operator*;
      android::RefBase::decStrong*;
      android::RefBase::incStrong*;
      android::RefBase::onFirstRef*;
      android::RefBase::onIncStrongAttempted*;
      android::RefBase::onLastStrongRef*;
      android::RefBase::onLastWeakRef*;
      android::RefBase::?RefBase*;
      android::RefBase::RefBase*;
      mir::write_to_log;
      typeinfo?for?android::RefBase;
      vtable?for?android::IntSet;
      mir::dispatch::ReadableFd::ReadableFd*;
      mir::dispatch::ReadableFd::?ReadableFd*;
      mir::dispatch::ReadableFd::watch_fd*;
      mir::dispatch::ReadableFd::dispatch*;
      mir::dispatch::ReadableFd::relevant_events*;
      mir::logger::Logger::log*;
    };
  local: *;
} MIR_COMMON_5;

MIR_COMMON_5v19 { # New functions in Mir 0.19.0
  global:
    extern "C++" {
      typeinfo?for?mir::logging::SharedLibraryProberReport;
      typeinfo?for?mir::time::SteadyClock;
      typeinfo?for?android::InputChannel;
      typeinfo?for?mir::logging::DumbConsoleLogger;
      mir::detail::libname_impl*;
    };
} MIR_COMMON_5.1;

MIR_COMMON_0.19.1 { # New functions in Mir 0.19.1
  global:
    extern "C++" {
      mir::select_libraries_for_path*;
    };
} MIR_COMMON_5v19;  # <- Note Mir 0.19.0 used the wrong syntax

MIR_COMMON_0.26 {
  global:
    extern "C++" {
       MirEvent::to_surface*;
       MirEvent::to_resize*;
       MirEvent::to_orientation*;
       MirEvent::to_close_surface*;
       MirEvent::to_keymap*;
       MirEvent::to_input*;
       MirEvent::to_prompt_session*;
       MirEvent::serialize*;
       MirEvent::deserialize*;
       MirEvent::clone*;
       MirEvent::type*;
       MirCloseSurfaceEvent::MirCloseSurfaceEvent*;
       MirCloseSurfaceEvent::surface_id*;
       MirCloseSurfaceEvent::set_surface_id*;
       MirSurfaceOutputEvent::MirSurfaceOutputEvent*;
       MirSurfaceOutputEvent::surface_id*;
       MirSurfaceOutputEvent::set_surface_id*;
       MirSurfaceOutputEvent::dpi*;
       MirSurfaceOutputEvent::set_dpi*;
       MirSurfaceOutputEvent::scale*;
       MirSurfaceOutputEvent::set_scale*;
       MirSurfaceOutputEvent::form_factor*;
       MirSurfaceOutputEvent::set_form_factor*;
       MirSurfaceOutputEvent::output_id*;
       MirSurfaceOutputEvent::set_output_id*;
       MirResizeEvent::MirResizeEvent*;
       MirResizeEvent::surface_id*;
       MirResizeEvent::set_surface_id*;
       MirResizeEvent::width*;
       MirResizeEvent::set_width*;
       MirResizeEvent::height*;
       MirResizeEvent::set_height*;
       MirSurfaceEvent::MirSurfaceEvent*;
       MirSurfaceEvent::id*;
       MirSurfaceEvent::set_id*;
       MirSurfaceEvent::attrib*;
       MirSurfaceEvent::set_attrib*;
       MirSurfaceEvent::value*;
       MirSurfaceEvent::set_value*;
       MirInputConfigurationEvent::MirInputConfigurationEvent*;
       MirInputConfigurationEvent::action*;
       MirInputConfigurationEvent::set_action*;
       MirInputConfigurationEvent::when*;
       MirInputConfigurationEvent::set_when*;
       MirInputConfigurationEvent::id*;
       MirInputConfigurationEvent::set_id*;
       MirInputEvent::cookie*;
       MirInputEvent::device_id*;
       MirInputEvent::event_time*;
       MirInputEvent::set_cookie*;
       MirInputEvent::set_device_id*;
       MirInputEvent::set_event_time*;
       MirInputEvent::to_keyboard*;
       MirInputEvent::to_pointer*;
       MirInputEvent::to_touch*;
       MirKeyboardEvent::MirKeyboardEvent*;
       MirKeyboardEvent::action*;
       MirKeyboardEvent::set_action*;
       MirKeyboardEvent::modifiers*;
       MirKeyboardEvent::set_modifiers*;
       MirKeyboardEvent::key_code*;
       MirKeyboardEvent::set_key_code*;
       MirKeyboardEvent::scan_code*;
       MirKeyboardEvent::set_scan_code*;
       MirKeymapEvent::MirKeymapEvent*;
       MirKeymapEvent::surface_id*;
       MirKeymapEvent::set_surface_id*;
       MirKeymapEvent::device_id*;
       MirKeymapEvent::set_device_id*;
       MirKeymapEvent::buffer*;
       MirKeymapEvent::set_buffer*;
       MirKeymapEvent::free_buffer*;
       MirKeymapEvent::size*;
       MirKeymapEvent::set_size*;
       MirTouchEvent::MirTouchEvent*;
       MirTouchEvent::modifiers*;
       MirTouchEvent::set_modifiers*;
       MirTouchEvent::set_contacts_count*;
       MirTouchEvent::contacts_coordinates*;
       MirTouchEvent::id*;
       MirTouchEvent::set_id*;
       MirTouchEvent::x*;
       MirTouchEvent::set_x*;
       MirTouchEvent::y*;
       MirTouchEvent::set_y*;
       MirTouchEvent::touch_major*;
       MirTouchEvent::set_touch_major*;
       MirTouchEvent::touch_minor*;
       MirTouchEvent::set_touch_minor*;
       MirTouchEvent::pressure*;
       MirTouchEvent::set_pressure*;
       MirTouchEvent::orientation*;
       MirTouchEvent::set_orientation*;
       MirTouchEvent::tool_type*;
       MirTouchEvent::set_tool_type*;
       MirTouchEvent::action*;
       MirTouchEvent::set_action*;
       MirOrientationEvent::MirOrientationEvent*;
       MirOrientationEvent::surface_id*;
       MirOrientationEvent::set_surface_id*;
       MirOrientationEvent::direction*;
       MirOrientationEvent::set_direction*;
       MirPromptSessionEvent::MirPromptSessionEvent*;
       MirPromptSessionEvent::new_state*;
       MirPromptSessionEvent::set_new_state*;
       MirPointerEvent::MirPointerEvent*;
       MirPointerEvent::modifiers*;
       MirPointerEvent::set_modifiers*;
       MirPointerEvent::x*;
       MirPointerEvent::set_x*;
       MirPointerEvent::y*;
       MirPointerEvent::set_y*;
       MirPointerEvent::dx*;
       MirPointerEvent::set_dy*;
       MirPointerEvent::vscroll*;
       MirPointerEvent::set_vscroll*;
       MirPointerEvent::hscroll*;
       MirPointerEvent::set_hscroll*;
       MirPointerEvent::buttons*;
       MirPointerEvent::set_buttons*;
       MirPointerEvent::tool_type*;
       MirPointerEvent::set_tool_type*;
       MirPointerEvent::action*;
       MirPointerEvent::set_action*;
    };
} MIR_COMMON_0.19.1;

MIR_COMMON_0.24 {
  global:
    extern "C++" {
       android::InputPublisher::publishEventBuffer*;
       MirEvent::to_input_device_state*;
       MirInputDeviceStateEvent::MirInputDeviceStateEvent*;
       MirInputDeviceStateEvent::device_count*;
       MirInputDeviceStateEvent::device_id*;
       MirInputDeviceStateEvent::device_pointer_buttons*;
       MirInputDeviceStateEvent::device_pressed_keys*;
       MirInputDeviceStateEvent::device_pressed_keys_count*;
       MirInputDeviceStateEvent::modifiers*;
       MirInputDeviceStateEvent::pointer_axis*;
       MirInputDeviceStateEvent::pointer_buttons*;
       MirInputDeviceStateEvent::set_modifiers*;
       MirInputDeviceStateEvent::set_pointer_axis*;
       MirInputDeviceStateEvent::set_pointer_buttons*;
       MirInputDeviceStateEvent::set_when*;
       MirInputDeviceStateEvent::when*;
       mir::time::SteadyClock::now*;
       mir::time::SteadyClock::min_wait_until*;
       android::MotionEvent::initialize*;
       mir::dispatch::epoll_to_fd_event*;
       mir::dispatch::fd_event_to_epoll*;
       mir::dispatch::ReadableFd*;
       vtable?for?mir::dispatch::ReadableFd;
    };
} MIR_COMMON_0.22;

MIR_COMMON_0.25 {
  global:
    extern "C++" {
      MirEvent::MirEvent*;
      MirEvent::operator*;
      MirInputEvent::operator*;
      MirInputDeviceStateEvent::set_device_states*;
      MirInputDeviceStateEvent::device_pressed_keys_for_index*;
      mir::event::store_data_for_lifetime_of_event*;
      MirSurfacePlacementEvent::MirSurfacePlacementEvent*;
      MirSurfacePlacementEvent::id*;
      MirSurfacePlacementEvent::set_id*;
      MirSurfacePlacementEvent::placement*;
      MirSurfacePlacementEvent::set_placement*;
      mir::output_type_name*;
    };
} MIR_COMMON_0.24;
