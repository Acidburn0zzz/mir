<?xml version="1.0" encoding="UTF-8"?>
<protocol name="mir">

  <copyright>
   Copyright Â© 2015 Canonical Ltd.

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU Lesser General Public License version 3 as
   published by the Free Software Foundation.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public License
   along with this program.  If not, see http://www.gnu.org/licenses/.
  </copyright>

  <interface name="mir_application" version="1">
    <description summary="Application interface">
    Stuff
    </description>

    <request name="connect">
      <description summary="Start a Mir application session">
        This method *must* be called before any other request is made. Failure to do so
        will raise a protocol error.
      </description>
      <arg name="name" type="string" summary="Name of the application"/>
    </request>

    <enum name="lifecycle_state">
      <entry name="will_suspend" value="0" summary="Application suspend is imminent"/>
      <entry name="resumed" value="1" summary="Application resumed from suspended state"/>
    </enum>

    <event name="lifecycle">
      <description summary="Application lifecycle event"/>
      <arg name="state" type="uint" summary="Things, you know. Bits"/>
    </event>
  </interface>

  <interface name="mir_shell_bananas" version="1">

    <request name="as_normal_window">
      <arg name="id" type="new_id" interface="mir_window_surface"/>
      <arg name="surface" type="object" interface="wl_surface" summary="The surface"/>
    </request>

     <request name="as_freestyle_window">
        <arg name="id" type="new_id" interface="mir_window_surface"/>
        <arg name="surface" type="object" interface="wl_surface" summary="The surface"/>
     </request>

    <enum name="attachment_edge">
      <entry name="vertical" value="1"/>
      <entry name="horizontal" value="2"/>
    </enum>

    <request name="as_menu">
      <arg name="id" type="new_id" interface="mir_menu_surface"/>
      <arg name="surface" type="object" interface="wl_surface" summary="The new menu surface"/>
      <arg name="parent" type="object" interface="mir_window_surface" summary="The parent surface"/>
      <arg name="top_left_x" type="int" summary="x coordinate of top left corner of attachment box"/>
      <arg name="top_left_y" type="int" summary="y coordinate of top left corner of attachment box"/>
      <arg name="bottom_right_x" type="int" summary="x coordinate of bottom right corner of attachment box"/>
      <arg name="bottom_right_y" type="int" summary="y coordinate of bottom right corner of attachment box"/>
      <arg name="attach_to_edge" type="int" summary="bitfield of acceptable edges to attach to"/>
      <arg name="seat" type="object" interface="wl_seat" summary="the wl_seat of the user event triggering this menu"/>
      <arg name="serial" type="uint" summary="the serial of the user event"/>
    </request>
  </interface>

  <interface name="mir_window_surface" version="1">
    <event name="close">
      <description summary="Please close, kthxbye"/>
    </event>

    <request name="destroy" type="destructor">
      <description summary="destroy the surface"/>
    </request>
  </interface>

  <interface name="mir_menu_surface" version="1">
    <event name="close">
      <description summary="Yup, someone's clicked elsewhere..."/>
    </event>

    <request name="destroy" type="destructor">
      <description summary="destroy the surface"/>
    </request>
  </interface>

  <interface name="mir_buffer_allocator" version="1">
    <description summary="Buffer allocation API; will shortly be reworked"/>
    <enum name="format">
      <entry name="argb8888" value="0"/>
      <entry name="xrgb8888" value="1"/>
    </enum>

    <request name="allocate_buffer" summary="Request a buffer">
      <arg name="surface" type="object" interface="wl_surface" summary="The surface"/>
      <arg name="width" type="uint"/>
      <arg name="height" type="uint"/>
      <arg name="format" type="uint"/>
    </request>
  </interface>
</protocol>
